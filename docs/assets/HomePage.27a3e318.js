import{q as h,c as f,o as a,b as l,d as o,F as k,s as x,t as T}from"./vendor.ab364a0c.js";import{A as r,_,l as u,P as p}from"./index.4ccbf1e7.js";function g(){return(new Date().getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16)).toLowerCase()}class m{constructor(e){this.id=e.id||g(),this.dateTime=e.dateTime,this.complete=e.complete||!1,this.halfTrip=e.halfTrip||!1}}class v{addTrip(e){const c=new m(e);r.trips=[...r.trips,c],this.saveLocal()}checkTrip(e){const c=r.trips.find(s=>s.id==e);c.complete=!c.complete,this.saveLocal()}deleteTrip(e){const c=r.trips.findIndex(s=>s.id==e);r.trips.splice(c,1),this.saveLocal()}saveLocal(){localStorage.setItem("my-tracker",JSON.stringify({trips:r.trips}))}loadLocal(){let e=JSON.parse(localStorage.getItem("my-tracker"));console.log("loaded data",e),e!=null&&(r.trips=e.trips.map(c=>new m(c)))}}const n=new v,S={setup(){return h(()=>{try{n.loadLocal()}catch(t){u.error(t),p.toast(t.message,"error")}}),{trips:f(()=>r.trips),addTrip(){const t={dateTime:new Date().toLocaleString()};n.addTrip(t)},halfTrip(){const t={dateTime:new Date().toLocaleString(),halfTrip:!0};n.addTrip(t)},checkTrip(t){n.checkTrip(t)},async deleteTrip(t){await p.confirm()&&n.deleteTrip(t)}}}},b={class:"container-fluid"},y={class:"row"},L={class:"col-12 p-3"},w={class:"col-12"},C={class:"form-check form-check-inline"},D=["id","onClick"],I=["id","onClick"],A=["for"],B=["onClick"];function N(t,e,c,s,P,V){return a(),l("div",b,[o("div",y,[o("div",L,[o("button",{class:"btn btn-success me-3",onClick:e[0]||(e[0]=(...i)=>s.addTrip&&s.addTrip(...i))},"Add date")]),o("div",w,[(a(!0),l(k,null,x(s.trips,i=>(a(),l("div",{class:"d-flex align-items-center p-2",key:i},[o("div",C,[i.complete?(a(),l("input",{key:0,type:"checkbox",class:"form-check-input",name:"",id:i.id,value:"checkedValue",checked:"",onClick:d=>s.checkTrip(i.id)},null,8,D)):(a(),l("input",{key:1,type:"checkbox",class:"form-check-input",name:"",id:i.id,value:"checkedValue",onClick:d=>s.checkTrip(i.id)},null,8,I)),o("label",{class:"form-check-label",for:i.id},T(i.dateTime),9,A)]),o("i",{class:"mdi mdi-delete-forever text-danger selectable",title:"Delete trip",onClick:d=>s.deleteTrip(i.id)},null,8,B)]))),128))])])])}var J=_(S,[["render",N]]);export{J as default};
